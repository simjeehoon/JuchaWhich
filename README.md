JuchaWhich
===
`내 차의 위치를 확인하는 앱`

이 앱을 이용하여 차량의 위치를 지도상에 저장할 수 있습니다. 저장한 위치는 다른 사용자와 공유할 수 있습니다.


## 앱 화면

<center>
<img src="https://github.com/simjeehoon/JuchaWhich/blob/develop/preview.png?raw=true" title="주차위치 앱 화면" alt="goob"></img><br/>
</center>


## 기능
- ### (1 - 1) 액션바
    + Toolbar를 이용하여 액션바의 좌측 슬라이드 메뉴 버튼, 우측 차량별 세부 버튼을 만들었습니다.

- ### (1 - 2) 슬라이드 메뉴
    + 전체 화면을 FrameLayout으로 설계한 뒤 슬라이드 메뉴 부분을 LinearLayout으로 설계하였습니다.
    + 애니메이션을 적용하여 메뉴가 서서히 드러나도록 하였고, 뒷배경이 어두워지도록 만들었습니다. 뒤로가기 버튼을 눌렀을 때나 다른 화면을 터치했을 때 닫히도록 설계했습니다.

- ### (1 - 3) 차량 목록 
    + 액션 바에서 차량을 선택할 수 있게 하였습니다.

- ### (1 - 4) 선택된 차량에 대한 메뉴 (우측 끝 버튼) 
    + Toolbar에서 기본적으로 제공해주었기에 menu 항목을 만들어 쉽게 설계했습니다.

- ### (1 - 5) 지도 화면(Google Map API)
    + 처음에 예상하기론 지도 화면을 표시하는 것은 매우 쉬울 줄 알았으나 예상 외로 상당한 어려움이 있었습니다. 
    + Google 지도 API 사용을 위하여 Google Cloud Platform에 가입하여 현재 프로젝트를 등록하고, API를 사용하기 위해 API Key를 생성하였으나 지도가 표시되지 않았습니다. 원인을 찾으려고 Google 검색 및 API 문서 등을 살펴보고 적용해 보았으나, 문제는 해결되지 않았습니다. 이렇게 원인을 찾는 과정만 3일이 걸렸고 끝내 안드로이드 SDK Tools 중 Google Play Service를 설치한 후 AVD를 지웠다가 다시 추가해야 된다는 사실을 알게 되었습니다. 

- ### (1 - 6) 지도에 겹쳐서 표시되는 상, 하 세부 정보 박스 
    + LinearLayout으로 처음에 차량 정보가 없을 때 나오는 사각형 창을 설계했습니다. 여기에도 애니메이션을 적용하여 지도 화면을 누를 때마다 사라지고 나타나는 효과를 주었습니다. 
    + 그러나 차량 주차의 상태가 바뀔 때마다 뷰를 바꿔야 했고, 뷰를 바꾼 뒤에 애니메이션을 적용하면 오류가 발생했습니다. 그래서 어쩔 수 없이 애니메이션은 제외했습니다.

- ### (1 - 7) 주차 버튼
    + 하단 세부 정보 박스 위에 표시되는 일반 주차, 주차장에 주차 버튼을 설계했습니다.

- ### (1 - 8) 현재 위치 버튼
    + Google 지도 API에서도 현재위치 버튼을 제공했으나, 현재위치 버튼이 상단 세부 정보 박스에 가려졌습니다. 이 버튼을 원하는 곳에 위치시키는 방법이 없어 직접 현재 위치를 나타내는 버튼을 만들었습니다.

- ### (1 - 9) 주차 해제 기능
    + 주차되어있는 차량을 주차 해제하는 기능입니다. 버튼을 눌러서 해제 가능합니다.

- ### (1 - 10) 주차 상태에 따라 메시지 박스 화면 변하게 하기
    + 선택된 차량의 주차 여부에 따라 상 하단 뷰가 달라지게 만들었습니다.
    + 이 과정에서 애니메이션이 적용되면 뷰의 배치가 이상해지는 현상이 발생했습니다. 끝내 애니메이션은 제외했습니다.

- ### (2 - 1) 차량 추가 액티비티 생성
    + 차량 정보를 입력받아 이를 서버에 전송하는 액티비티를 만들었습니다. 차량정보는 firebase에 저장됩니다.

- ### (2 - 2) 주차위치 저장 액티비티 생성
    + 특정 차량에 대한 주차위치를 저장하는 액티비티를 만들었습니다. 주차위치는 firebase에 저장됩니다. 주차 정보에에 메모는 포함 가능하지만 사진 메모가 포함되는 것은 구현하지 못했습니다.

- ### (3 - 1) 로그인 액티비티
    + 구글 계정을 이용하여 로그인이 가능하도록 하였습니다.

- ### (4 - 1) 친구 목록 액티비티
    + 친구 목록을 불러오고, 친구를 추가하는 액티비티입니다.

- ### (4 - 2) 차단 목록 액티비티
    + 특정 유저를 차단하는 액티비티입니다.

- ### (5 - 1) 내 계정 액티비티
    + 로그인되어있는 계정을 로그아웃하도록 하였습니다.

## 다른 앱과 비교되는 장점
+ #### 일반 주차 및 주차장에 주차가 구분되어 있습니다.
    주차장에 주차를 선택할 경우 층별 주차장 지도가 표시됩니다. 이를 통해 차량의 위치를 쉽게 파악할 수 있습니다.
    
+ #### 하나의 차량을 다수의 사용자가 공유할 수 있습니다.
    차량 초대 기능을 이용하여 주차 위치를 다수의 사용자가 공유할 수 있습니다.


개발 중 어려웠던 점
---
 데이터베이스로부터 데이터를 가져오는 클래스를 구성했을 경우 정보를 가져오는 데에 시간차가 발생하는 것을 알게 되었습니다. 이를 해결하기 위해 메소드마다 listner를 적용하였습니다. 또한 예상치 못한 오류, 데이터 형태에 대응하느라 많은 시간이 들었습니다.
 그리고 개발을 시작하기 전에 Bluetooth 구현이 쉬울것이라 생각했던 것과, Google API 문서가 잘 준비되어 있을 것이라 생각하였던 것이 큰 문제가 되었습니다. 실제로는 그렇지 않았기에 Bluetooth 구현은 실패하고, Google 지도 문제를 해결하는데 많은 시간이 걸렸습니다.  
